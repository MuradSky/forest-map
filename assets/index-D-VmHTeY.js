(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(t){if(t.ep)return;t.ep=!0;const e=i(t);fetch(t.href,e)}})();const f=async({container:o,minZoom:n,maxZoom:i},a)=>{const t=await fetch("./tmp/map-schema.svg").then(r=>r.text()),e=d3.zoom().scaleExtent([n,i]).on("zoom",g),s=d3.create("svg");l(s,{width:1920,height:1080,viewBox:"0 0 8324 4734",class:"map-svg"});const m=s.append("g");l(m,{class:"map-group"}),m.html(t),s.call(e,d3.zoomIdentity),o.append(s.node());function l(r,c){Object.keys(c).forEach(d=>r.attr(d,c[d]))}function g(r){const{transform:c}=r;m.attr("transform",c),console.log(c),a(c)}return{zoomTrigger:r=>(r==="in"&&s.transition().call(e.scaleBy,1.5),r==="out"&&s.transition().call(e.scaleBy,.6),d3.zoomTransform(s.node())),setZoomToTop:r=>{const c=d3.zoomIdentity.translate(0,r);s.call(e.transform,c)},rangeTrigger:r=>e.scaleTo(s.transition(),r),resetZoom:()=>{const r=d3.zoomIdentity.translate(0,0);s.transition().call(e.scaleTo,1).call(e.transform,r)},initCoords:d3.zoomTransform(s.node())}},p=[{view:1024,translateY:-2500,def:0},{view:834,translateY:-3e3,def:-2500},{view:600,translateY:-3700,def:-3e3},{view:500,translateY:-4800,def:-3700},{view:428,translateY:-6e3,def:-4800},{view:414,translateY:-5e3,def:-6e3},{view:390,translateY:-6300,def:-5e3},{view:375,translateY:-4800,def:-6300}],{ref:h}=Vue,w=`
    <div class="d3-app-wrap" ref="svgContainer">
        <div class="d3-app-control">
            <button @click="zoomIn">
                <i class="fa-solid fa-plus"></i>
            </button>
            <button @click="zoomOut">
                <i class="fa-solid fa-minus"></i>
            </button>
            <button @click="resetZoom">
                <i class="fa-solid fa-down-left-and-up-right-to-center"></i>
            </button>
        </div>
    </div>
`,T={template:w,setup(){return{svgContainer:h(),responsive:p}},data(){return{minZoom:1,maxZoom:10,zoomTrigger:null,setZoomToTop:null,rangeTrigger:null,sliderValue:10,resetZoom:null}},methods:{selected(o){console.log(o)},zoomIn(){const o=this.zoomTrigger("in");this.sliderValue=100*o.k/this.maxZoom},zoomOut(){const o=this.zoomTrigger("out");this.sliderValue=o.k===1?0:100*o.k/this.maxZoom},zoomRange(o){this.sliderValue=o;const n=Number((Number((this.maxZoom/100*o).toFixed(1))+.4).toFixed(1)),i=n<5?n:(n-.4).toFixed(1);this.rangeTrigger(+i)},changeZoom(o){this.setZoomToTop(o)},setMaxZoomByViewport(){const o=window.matchMedia("(max-width: 768px)").matches;this.maxZoom=o?30:6}},mounted(){this.setMaxZoomByViewport();const o={container:this.svgContainer,minZoom:this.minZoom,maxZoom:this.maxZoom},n=({k:i})=>this.sliderValue=i===1?0:100*i/this.maxZoom;f(o,n).then(i=>{const{zoomTrigger:a,setZoomToTop:t,rangeTrigger:e,resetZoom:s,initCoords:m}=i;n(m),this.zoomTrigger=a,this.setZoomToTop=t,this.rangeTrigger=e,this.resetZoom=s})}},{createApp:Z}=Vue,u=document.querySelector("#app"),v={components:{CreateMap:T},methods:{adaptiveZoom(){const o=Math.round(window.devicePixelRatio*100),n=window!=null&&window.innerWidth?100*(window.innerWidth/1920):100,i=window!=null&&window.innerHeight?100*(window.innerHeight/1080):100,a=n>i?i:n;o<100?u.style.transform=`scale(${parseFloat(a+"%")/100})`:u.style.transform=null}},mounted(){},unmounted(){}},z=Z(v);z.mount("#app");
