(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(t){if(t.ep)return;t.ep=!0;const e=i(t);fetch(t.href,e)}})();const g=async({container:o,minZoom:r,maxZoom:i},c)=>{const t=await fetch("./tmp/map-schema.svg").then(n=>n.text()),e=d3.zoom().scaleExtent([r,i]).on("zoom",f),s=d3.create("svg");m(s,{width:1920,height:1080,viewBox:"0 0 8324 4734",class:"map-svg"});const l=s.append("g");m(l,{class:"map-group"}),l.html(t),s.call(e,d3.zoomIdentity),console.log(o),o.append(s.node()),Array.from(s.node().querySelectorAll("text")).forEach(n=>{n.style.setProperty("--fs-t",n.style.fontSize),Array.from(n.children).forEach(a=>{a.style.fontSize&&a.style.setProperty("--fs-ts",a.style.fontSize)})});function m(n,a){Object.keys(a).forEach(d=>n.attr(d,a[d]))}function f(n){const{transform:a}=n;l.attr("transform",a),console.log(a),c(a)}return{zoomTrigger:n=>(n==="in"&&s.transition().call(e.scaleBy,1.5),n==="out"&&s.transition().call(e.scaleBy,.6),d3.zoomTransform(s.node())),setZoomToTop:n=>{const a=d3.zoomIdentity.translate(0,n);s.call(e.transform,a)},rangeTrigger:n=>e.scaleTo(s.transition(),n),resetZoom:()=>{const n=d3.zoomIdentity.translate(0,0);s.transition().call(e.scaleTo,1).call(e.transform,n)},initCoords:d3.zoomTransform(s.node())}},p=[{view:1024,translateY:-2500,def:0},{view:834,translateY:-3e3,def:-2500},{view:600,translateY:-3700,def:-3e3},{view:500,translateY:-4800,def:-3700},{view:428,translateY:-6e3,def:-4800},{view:414,translateY:-5e3,def:-6e3},{view:390,translateY:-6300,def:-5e3},{view:375,translateY:-4800,def:-6300}],{ref:h}=Vue,w=`
    <div class="d3-app-wrap" ref="svgContainer">
        <div class="d3-app-control">
            <button @click="zoomIn">
                <i class="fa-solid fa-plus"></i>
            </button>
            <button @click="zoomOut">
                <i class="fa-solid fa-minus"></i>
            </button>
            <button @click="resetZoom">
                <i class="fa-solid fa-down-left-and-up-right-to-center"></i>
            </button>
        </div>
    </div>
`,y={template:w,setup(){return{svgContainer:h(),responsive:p}},data(){return{minZoom:1,maxZoom:10,zoomTrigger:null,setZoomToTop:null,rangeTrigger:null,sliderValue:10,resetZoom:null}},methods:{selected(o){console.log(o)},zoomIn(){const o=this.zoomTrigger("in");this.sliderValue=100*o.k/this.maxZoom},zoomOut(){const o=this.zoomTrigger("out");this.sliderValue=o.k===1?0:100*o.k/this.maxZoom},zoomRange(o){this.sliderValue=o;const r=Number((Number((this.maxZoom/100*o).toFixed(1))+.4).toFixed(1)),i=r<5?r:(r-.4).toFixed(1);this.rangeTrigger(+i)},changeZoom(o){this.setZoomToTop(o)},setMaxZoomByViewport(){const o=window.matchMedia("(max-width: 768px)").matches;this.maxZoom=o?30:6}},mounted(){this.setMaxZoomByViewport();const o={container:this.svgContainer,minZoom:this.minZoom,maxZoom:this.maxZoom},r=({k:i})=>this.sliderValue=i===1?0:100*i/this.maxZoom;g(o,r).then(i=>{const{zoomTrigger:c,setZoomToTop:t,rangeTrigger:e,resetZoom:s,initCoords:l}=i;r(l),this.zoomTrigger=c,this.setZoomToTop=t,this.rangeTrigger=e,this.resetZoom=s})}},{createApp:T}=Vue,u=document.querySelector("#app"),Z={components:{CreateMap:y},methods:{adaptiveZoom(){const o=Math.round(window.devicePixelRatio*100),r=window!=null&&window.innerWidth?100*(window.innerWidth/1920):100,i=window!=null&&window.innerHeight?100*(window.innerHeight/1080):100,c=r>i?i:r;o<100?u.style.transform=`scale(${parseFloat(c+"%")/100})`:u.style.transform=null}},mounted(){},unmounted(){}},z=T(Z);z.mount("#app");
